---
import Layout from '@/layouts/Layout.astro';

const topBg = 'bg-[#151619]';
const topText = 'text-white';
const topBorder = 'border-gray-700';
const topMuted = 'text-gray-400';
const cardBg = 'bg-[#1a1a1e]';
const forceDark = true;

// Plan definitions
const plans = [
  {
    id: 'starter',
    name: 'Starter',
    price: '$0',
    priceDetail: '+ compute / month',
    cta: 'Get Started',
    ctaHref: 'https://app.revyl.ai/signup',
    highlighted: false,
  },
  {
    id: 'team',
    name: 'Team',
    price: '$250',
    priceDetail: '+ compute / month',
    cta: 'Get Started',
    ctaHref: 'https://app.revyl.ai/signup',
    highlighted: true,
  },
  {
    id: 'enterprise',
    name: 'Enterprise',
    price: 'Custom',
    priceDetail: '',
    cta: 'Get in Touch',
    ctaHref: 'https://cal.com/landseer-enga/book-a-demo',
    highlighted: false,
  },
];

// Comparison table
const comparison = [
  {
    title: 'Usage',
    rows: [
      { label: 'Concurrent devices', values: ['2', '10', 'Unlimited'] },
      {
        label: 'Compute credits',
        values: [
          { main: '$20 free one-time', sub: 'then pay-as-you-go' },
          { main: '$250 free / mo', sub: 'then pay-as-you-go' },
          'Custom',
        ],
      },
    ],
  },
  {
    title: 'Features',
    rows: [
      { label: 'iOS & Android simulators', values: [true, true, true] },
      { label: 'Real-time metrics and logs', values: [true, true, true] },
      { label: 'Visual test editor', values: [true, true, true] },
      { label: 'Priority device queue', values: [false, true, true] },
      { label: 'Dedicated support via Slack', values: [false, true, true] },
      { label: 'Dedicated instances', values: [false, false, true] },
      { label: 'Volume-based discounts', values: [false, false, true] },
      { label: 'Custom SLAs', values: [false, false, true] },
    ],
  },
  {
    title: 'Security & Compliance',
    rows: [
      { label: 'SOC 2 Type II', values: [true, true, true] },
      { label: 'SSO (SAML & OIDC)', values: [false, true, true] },
      { label: 'RBAC', values: [false, false, true] },
      { label: 'SCIM / Directory sync', values: [false, false, true] },
      { label: 'Enforced 2FA / MFA', values: [false, false, true] },
      { label: 'Audit logs', values: [false, false, true] },
    ],
  },
];

// Rate card (static)
const rates = [
  { platform: 'iOS', deviceType: 'Simulator', perSecond: '0.0025', perMinute: '0.15' },
  { platform: 'Android', deviceType: 'Emulator', perSecond: '0.0020', perMinute: '0.12' },
];
---

<Layout title="Pricing | Revyl" description="Simple, transparent pricing for AI-powered mobile testing. Start free, scale as you grow." forceDark={forceDark}>
  <div class={`${topBg} ${topText}`}>
    <!-- Hero -->
    <section class="px-6 py-24 md:py-36">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-light tracking-tight mb-6">
          Simple, transparent pricing
        </h1>
        <p class={`text-xl md:text-2xl ${topMuted} max-w-2xl mx-auto`}>
          Start free. Pay only for what you use. Scale when you're ready.
        </p>
      </div>
    </section>

    <!-- Plan cards -->
    <section class="px-6 pb-16">
      <div class="max-w-5xl mx-auto -mt-12">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-0">
          {plans.map((plan) => (
            <div
              class={`p-6 md:p-8 border ${topBorder} ${
                plan.highlighted
                  ? 'bg-[#9D61FF]/[0.06] border-[#9D61FF]/30'
                  : cardBg
              }`}
            >
              <div class="flex items-center gap-2 mb-2">
                <h3 class="text-sm font-medium uppercase tracking-wider text-gray-300">
                  {plan.name}
                </h3>
                {plan.highlighted && (
                  <span class="text-[10px] font-mono uppercase tracking-wider text-[#C4A1FF] bg-[#C4A1FF]/10 px-1.5 py-0.5">
                    Popular
                  </span>
                )}
              </div>
              <div class="mb-6">
                <span class="text-4xl font-semibold tabular-nums font-mono">
                  {plan.price}
                </span>
                {plan.priceDetail && (
                  <span class={`text-sm ${topMuted} ml-1`}>
                    {plan.priceDetail}
                  </span>
                )}
              </div>
              <a
                href={plan.ctaHref}
                class={`flex items-center justify-center h-11 px-6 text-sm font-medium transition-all ${
                  plan.highlighted
                    ? 'bg-[#C4A1FF] text-[#1C1732] hover:opacity-90'
                    : `border ${topBorder} hover:bg-white/5`
                }`}
              >
                {plan.cta}
                {plan.id === 'enterprise' && (
                  <svg class="w-3.5 h-3.5 ml-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 17L17 7M17 7H7M17 7v10" />
                  </svg>
                )}
              </a>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Comparison table -->
    <section class={`px-6 py-16 md:py-24 border-t ${topBorder}`}>
      <div class="max-w-5xl mx-auto">
        <h2 class="text-sm font-medium text-gray-300 uppercase tracking-wider mb-6">
          Compare Plans
        </h2>

        <div class={`border ${topBorder} ${cardBg} overflow-x-auto`}>
          <!-- Table header row -->
          <div class="grid grid-cols-[1.5fr_repeat(3,1fr)] min-w-[600px]">
            <div class={`p-5 border-b ${topBorder}`}></div>
            {plans.map((plan) => (
              <div class={`p-5 border-b border-l ${topBorder} ${
                plan.highlighted ? 'bg-[#9D61FF]/[0.06]' : ''
              }`}>
                <span class="text-base font-medium">{plan.name}</span>
              </div>
            ))}
          </div>

          <!-- Comparison groups -->
          {comparison.map((group) => (
            <>
              <div class={`grid grid-cols-[1.5fr_repeat(3,1fr)] min-w-[600px]`}>
                <div class={`col-span-4 px-5 py-3 bg-white/[0.03] border-b ${topBorder}`}>
                  <span class="text-xs font-medium text-gray-500 uppercase tracking-wider">
                    {group.title}
                  </span>
                </div>
              </div>
              {group.rows.map((row) => (
                <div class={`grid grid-cols-[1.5fr_repeat(3,1fr)] min-w-[600px] border-b ${topBorder} last:border-b-0`}>
                  <div class="px-5 py-3.5 flex items-center">
                    <span class="text-sm text-gray-400">{row.label}</span>
                  </div>
                  {row.values.map((val: any, i: number) => (
                    <div class={`px-5 py-3.5 flex items-center border-l ${topBorder} ${
                      plans[i].highlighted ? 'bg-[#9D61FF]/[0.06]' : ''
                    }`}>
                      {typeof val === 'boolean' ? (
                        val ? (
                          <svg class="h-5 w-5 text-[#C4A1FF]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                          </svg>
                        ) : (
                          <svg class="h-5 w-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                          </svg>
                        )
                      ) : typeof val === 'object' ? (
                        <div class="flex flex-col">
                          <span class="text-sm font-medium">{val.main}</span>
                          <span class="text-xs text-gray-500">{val.sub}</span>
                        </div>
                      ) : (
                        <span class="text-sm font-medium">{val}</span>
                      )}
                    </div>
                  ))}
                </div>
              ))}
            </>
          ))}
        </div>
      </div>
    </section>

    <!-- Rate card -->
    <section class={`px-6 py-16 md:py-24 border-t ${topBorder}`}>
      <div class="max-w-5xl mx-auto">
        <h2 class="text-sm font-medium text-gray-300 uppercase tracking-wider mb-2">
          Rate Card
        </h2>
        <p class={`text-[13px] ${topMuted} mb-6`}>
          Pay-as-you-go compute rates. Usage beyond your included credits is billed at these rates.
        </p>

        <div class={`border ${topBorder} ${cardBg} overflow-x-auto`}>
          <table class="w-full min-w-[500px]">
            <thead>
              <tr class="bg-white/[0.03]">
                <th class={`text-left text-xs font-medium text-gray-500 uppercase tracking-wider px-5 py-3.5 border-b ${topBorder}`}>
                  Platform
                </th>
                <th class={`text-left text-xs font-medium text-gray-500 uppercase tracking-wider px-5 py-3.5 border-b ${topBorder}`}>
                  Device Type
                </th>
                <th class={`text-right text-xs font-medium text-gray-500 uppercase tracking-wider px-5 py-3.5 border-b ${topBorder}`}>
                  $/second
                </th>
                <th class={`text-right text-xs font-medium text-gray-500 uppercase tracking-wider px-5 py-3.5 border-b ${topBorder}`}>
                  $/minute
                </th>
              </tr>
            </thead>
            <tbody>
              {rates.map((rate, i) => (
                <tr class={`border-b ${topBorder} last:border-b-0`}>
                  <td class="text-sm text-gray-300 px-5 py-3.5">{rate.platform}</td>
                  <td class="text-sm text-gray-300 px-5 py-3.5">{rate.deviceType}</td>
                  <td class="text-sm text-gray-300 px-5 py-3.5 text-right font-mono tabular-nums">${rate.perSecond}</td>
                  <td class="text-sm text-gray-300 px-5 py-3.5 text-right font-mono tabular-nums">${rate.perMinute}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- FAQ / CTA -->
    <section class={`px-6 py-24 md:py-36 border-t ${topBorder}`}>
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-3xl md:text-4xl font-light tracking-tight mb-6">
          Questions? Let's talk.
        </h2>
        <p class={`text-lg ${topMuted} mb-10 max-w-xl mx-auto`}>
          Need a custom plan, volume discounts, or have questions about how billing works? We'd love to help.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="https://app.revyl.ai/signup"
            class="inline-flex items-center justify-center h-12 px-8 text-base font-medium bg-[#C4A1FF] text-[#1C1732] hover:opacity-90 transition-opacity"
          >
            Start for Free
          </a>
          <a
            href="https://cal.com/landseer-enga/book-a-demo"
            class={`inline-flex items-center justify-center h-12 px-8 text-base font-medium border ${topBorder} hover:bg-white/5 transition-colors`}
          >
            Book a Demo
          </a>
        </div>
      </div>
    </section>
  </div>
</Layout>
