---
import { getCollection } from 'astro:content';
import Layout from '@/layouts/Layout.astro';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={`${post.data.title} | Revyl`} description={post.data.description}>
  <!-- Back link section - border extends edge to edge -->
  <div class="px-6 py-4 border-b border-slate-300 dark:border-gray-700">
    <a href="/blog" class="inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
      Back to Blog
    </a>
  </div>

  <!-- Article header section -->
  <div class="px-6 py-10 border-b border-slate-300 dark:border-gray-700">
    <article class="max-w-3xl mx-auto">
      <!-- Category -->
      <span class="text-sm font-medium text-[#9D61FF] dark:text-[#C4A1FF] mb-4 block">
        {post.data.tags[0] || 'Product'}
      </span>

      <!-- Title -->
      <h1 class="text-4xl font-light tracking-tight mb-6">
        {post.data.title}
      </h1>

      <!-- Meta -->
      <div>
        <div class="font-medium">{post.data.author || 'Revyl Team'}</div>
        <time datetime={post.data.pubDate.toISOString()} class="text-sm text-muted-foreground">
          {new Date(post.data.pubDate).toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
          })}
        </time>
      </div>
    </article>
  </div>

  <!-- Content section -->
  <div class="px-6 py-10">
    <div class="prose prose-lg dark:prose-invert max-w-3xl mx-auto prose-headings:font-light prose-headings:tracking-tight prose-a:text-[#9D61FF] dark:prose-a:text-[#C4A1FF] prose-code:text-sm prose-pre:bg-muted prose-pre:border prose-pre:border-slate-300 dark:border-gray-700">
      <Content />
    </div>
  </div>
</Layout>
